<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <input type = "text" id = "email">
    <script>
        const checkEmail = function(email)
        {
            const token = email.split("@");
            // const token2 = token[1].split(".");
            // if ((token.length-1) !== 1,
            // token[0].length === 0,
            // token[1].length === 0,
            // token[1].includes(".",) === false,
            // token2[1].length === 0)
            if ((token.length-1) !== 1)
            {
                console.error("@가 없습니다.")
                return false;
            }
            if (token[0].length <= 0)
            {
                console.error("@ 앞에 문자가 없습니다.")
                return false;
            }
            if (token[1].length <= 0)
            {
                console.error("@ 뒤에 문자가 없습니다.")
                return false;
            }
            if (token[1].indexOf(".") === -1)
            {
                console.error(". 이 없습니다.")
                return false;
            }
            if ((token[1].indexOf(".") + 1) === token[1].length)
            {
                console.error(". 뒤에 문자가 없습니다.")
                return false;
            }

            return true ;
        }

        const $email = document.getElementById("email");
        const $h1 = document.createElement("h1");

        // let trueMsg = "이메일 형식입니다."
        // let falseMsg = "이메일 형식이 아닙니다." 

        $email.addEventListener('keyup',(event =>{
            let text = event.currentTarget.value;

            if (checkEmail(text) === true)
            {
                document.body.appendChild($h1);
                // $h1.textContent = trueMsg;
                $h1.textContent = "이메일입니다."
            }
            else
            {
                document.body.appendChild($h1);
                // $h1.textContent = falseMsg;
                $h1.textContent = "이메일이 아닙니다."
            }
        }));

        // 1. @ 존재여부
        // if (token.length-1) !== 1

        // 2. @ 앞에 문자 1개 이상 존재여부
        // token[0].length === 0
        // token[0].length <= 0
        
        // 3. @ 뒤에 문자 1개 이상 존재여부
        // if (token[1].length <= 0)

        // 4. @ 뒤에 . 존재 확인 여부
        // token[1].indexOf(".") === -1

        // 5. . 뒤에 문자 1개 이상 존재여부
        // token[1].indexOf(".") + 1 === token[1].length

        // const token2 = token[1].split(".");
        // token2[1].length === 0
   </script> 
    </script>
</body>
</html>