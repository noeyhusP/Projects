<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- 비디오 삽입 방법 -->
    <!-- <video src="./video/apple.mp4" autoplay loop muted controls></video> -->
    <!-- 반복 자동재생, muted, 재생바 생성 -->

    <!-- 캔버스로 캡쳐이미지 비디오처럼 넣기 -->
    <canvas id="canvas" width="1920" height="1080">
        <!-- 캔버스에 width랑 height는 기본적으로 지정해주는 게 좋음 -->
    </canvas>

    <script>
        // var canvas = document.getElementById('canvas');
        // var ctx = canvas.getContext('2d');
        // // graphic context(default값 집합)을 2d로 가져옴
        // ctx.fillStyle = 'green';
        // // 기본컬러를 green으로 바꿈
        // ctx.fillRect(10, 10, 100, 100);

        // 1. 캔버스 및 context를 가지고 온다
        const canvas = document.querySelector('#canvas');
        const ctx = canvas.getContext('2d'); // d 대소문자 유의!!

        const imgCount = 570;
        let imgElement;
        let imgArray = [];
        // imgElement의 참조값을 배열로 만듦

        // 2. for문으로 이미지를 불러와서 배열에다 넣는다
        for (let i = 0; i < imgCount; i++)
        {
            imgElement = new Image(); // (); 는 그냥 법칙처럼 붙이는 것
            // new는 heap에다가 new뒤에 객체를 할당할 때 쓰는 키워드 (이미지객체 생성)
            // image를 저장할 수 있는 node를 생성
            imgElement.src = `./image/apple_${i}.png`;
            console.log(`./image/apple_${i}.png`);

            imgArray.push(imgElement);
            // 각 img객체들에 접근할 수 있도록 imgArray 생성해줌

        }

        // load이벤트는 자기가 로딩해야할 리소스가 다 로딩되면 발생하는 이벤트
        // 즉 for문이 다 돌고 마지막 이미지까지 모두 로딩했을 때 발생

        // dom node에 (상태가 바뀌면 호출할 수 있는) addEventListener을 붙일 수 있는 것 처럼
        // 같은 원리로 imgElement도 addEvenListener을 붙일 수 있음
        // imeElement도 새로 할당한 node이기 때문
        imgElement.addEventListener('load',()=>{
            ctx.drawImage(imgArray[0], 0, 0);
            // 배열의 모든 img객체가 자신의 리소스를 다 로딩했을 시점이기 때문에
            // 0번째 이미지를 컨텍스트에 넣어라 
        });

    </script>
    
</body>
</html>